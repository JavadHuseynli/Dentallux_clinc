---
// FAQ Component with Accordion
import { t } from '../i18n/translations';

const lang = Astro.cookies.get('lang')?.value || 'az';

const faqs = [
  {
    question: t(lang, 'faq_question_1'),
    answer: t(lang, 'faq_answer_1')
  },
  {
    question: t(lang, 'faq_question_2'),
    answer: t(lang, 'faq_answer_2')
  },
  {
    question: t(lang, 'faq_question_3'),
    answer: t(lang, 'faq_answer_3')
  },
  {
    question: t(lang, 'faq_question_4'),
    answer: t(lang, 'faq_answer_4')
  },
  {
    question: t(lang, 'faq_question_5'),
    answer: t(lang, 'faq_answer_5')
  },
  {
    question: t(lang, 'faq_question_6'),
    answer: t(lang, 'faq_answer_6')
  },
  {
    question: t(lang, 'faq_question_7'),
    answer: t(lang, 'faq_answer_7')
  },
  {
    question: t(lang, 'faq_question_8'),
    answer: t(lang, 'faq_answer_8')
  }
];
---

<section id="faq" class="faq-section section-padding">
  <div class="container-custom">
    <div class="section-header-center">
      <span class="section-badge">{t(lang, 'faq_badge')}</span>
      <h2 class="section-title">{t(lang, 'faq_title')}</h2>
      <p class="section-subtitle">
        {t(lang, 'faq_subtitle')}
      </p>
    </div>

    <div class="faq-wrapper">
      <div class="faq-list">
        {faqs.map((faq, index) => (
          <div class="faq-item">
            <button class="faq-question" data-faq-index={index}>
              <span>{faq.question}</span>
              <svg class="faq-icon" width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
              </svg>
            </button>
            <div class="faq-answer">
              <p>{faq.answer}</p>
            </div>
          </div>
        ))}
      </div>

      <!-- Contact CTA -->
      <div class="faq-cta">
        <div class="faq-cta-content">
          <h3>{t(lang, 'faq_cta_title')}</h3>
          <p>{t(lang, 'faq_cta_text')}</p>
          <div class="faq-cta-buttons">
            <a href="#contact" class="btn-primary">
              {t(lang, 'faq_cta_contact')}
              <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
              </svg>
            </a>
            <a href="tel:5551234567" class="btn-secondary">
              <svg width="18" height="18" fill="currentColor" viewBox="0 0 20 20">
                <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
              </svg>
              (555) 123-4567
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // FAQ Accordion functionality
  document.addEventListener('DOMContentLoaded', () => {
    const faqButtons = document.querySelectorAll('.faq-question');

    faqButtons.forEach(button => {
      button.addEventListener('click', () => {
        const faqItem = button.parentElement;
        const isActive = faqItem.classList.contains('active');

        // Close all other FAQ items
        document.querySelectorAll('.faq-item').forEach(item => {
          item.classList.remove('active');
        });

        // Toggle current item
        if (!isActive) {
          faqItem.classList.add('active');
        }
      });
    });
  });
</script>

<style>
  .faq-section {
    background: var(--bg-secondary);
  }

  .section-header-center {
    text-align: center;
    max-width: 700px;
    margin: 0 auto 60px;
  }

  .section-badge {
    display: inline-block;
    background: var(--bg-primary);
    border: 1px solid var(--primary);
    color: var(--primary);
    padding: 8px 20px;
    border-radius: var(--radius-full);
    font-size: 13px;
    font-weight: 700;
    margin-bottom: 16px;
    letter-spacing: 0.5px;
    text-transform: uppercase;
  }

  .section-header-center .section-title {
    font-size: 40px;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: 16px;
  }

  .section-header-center .section-subtitle {
    font-size: 16px;
    color: var(--text-secondary);
    line-height: 1.6;
  }

  .faq-wrapper {
    max-width: 900px;
    margin: 0 auto;
  }

  .faq-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-bottom: 50px;
  }

  .faq-item {
    background: var(--bg-primary);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .faq-item:hover {
    box-shadow: var(--shadow-md);
  }

  .faq-question {
    width: 100%;
    padding: 20px 24px;
    background: transparent;
    border: none;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
    cursor: pointer;
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    text-align: left;
    transition: all 0.3s ease;
  }

  .faq-question:hover {
    color: var(--primary);
  }

  .faq-icon {
    flex-shrink: 0;
    transition: transform 0.3s ease;
    color: var(--text-secondary);
  }

  .faq-item.active .faq-icon {
    transform: rotate(180deg);
    color: var(--primary);
  }

  .faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }

  .faq-item.active .faq-answer {
    max-height: 500px;
  }

  .faq-answer p {
    padding: 0 24px 24px;
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.7;
  }

  .faq-cta {
    background: linear-gradient(135deg, var(--primary) 0%, #1e5a99 100%);
    border-radius: var(--radius-xl);
    padding: 48px;
    text-align: center;
    box-shadow: var(--shadow-xl);
  }

  .faq-cta-content h3 {
    font-size: 28px;
    font-weight: 800;
    color: white;
    margin-bottom: 12px;
  }

  .faq-cta-content p {
    font-size: 16px;
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 28px;
  }

  .faq-cta-buttons {
    display: flex;
    gap: 16px;
    justify-content: center;
    flex-wrap: wrap;
  }

  .faq-cta .btn-primary {
    background: var(--bg-primary);
    color: var(--primary);
    padding: 14px 28px;
    border-radius: var(--radius-md);
    text-decoration: none;
    font-weight: 600;
    font-size: 15px;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
  }

  .faq-cta .btn-primary:hover {
    background: var(--bg-gray);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
  }

  .faq-cta .btn-secondary {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    padding: 14px 28px;
    border-radius: var(--radius-md);
    text-decoration: none;
    font-weight: 600;
    font-size: 15px;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    transition: all 0.3s ease;
  }

  .faq-cta .btn-secondary:hover {
    background: rgba(255, 255, 255, 0.25);
    transform: translateY(-2px);
  }

  @media (max-width: 640px) {
    .section-header-center .section-title {
      font-size: 32px;
    }

    .faq-question {
      padding: 16px 20px;
      font-size: 15px;
    }

    .faq-answer p {
      padding: 0 20px 20px;
    }

    .faq-cta {
      padding: 32px 24px;
    }

    .faq-cta-content h3 {
      font-size: 24px;
    }

    .faq-cta-buttons {
      flex-direction: column;
    }

    .faq-cta .btn-primary,
    .faq-cta .btn-secondary {
      width: 100%;
      justify-content: center;
    }
  }
</style>
